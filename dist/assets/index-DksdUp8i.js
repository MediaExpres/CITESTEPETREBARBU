import{S as Ze,M as $e,B as Re,T as Ie,a as U,b as d,P as Je,W as Qe,R as de,c as et,A as tt,d as ot,e as nt,f as st,D as it,g as k,O as at,h as rt,i as he,G as V,C as we,j as Ge,k as We,l as ze,E as Be,m as ue,n as J,o as ct,V as g}from"./vendor-three-B8ZBkTJ1.js";(function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))s(t);new MutationObserver(t=>{for(const a of t)if(a.type==="childList")for(const h of a.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&s(h)}).observe(document,{childList:!0,subtree:!0});function i(t){const a={};return t.integrity&&(a.integrity=t.integrity),t.referrerPolicy&&(a.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?a.credentials="include":t.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function s(t){if(t.ep)return;t.ep=!0;const a=i(t);fetch(t.href,a)}})();const Fe="ontouchstart"in window||navigator.maxTouchPoints>0,u=new Ze,lt=new ct,dt=["skybox/px.png","skybox/nx.png","skybox/py.png","skybox/ny.png","skybox/pz.png","skybox/nz.png"],ht=dt.map(e=>new $e({map:new Ie().load(e),side:Re})),wt=new U(950,950,950),ut=new d(wt,ht);u.add(ut);const C=new Je(75,window.innerWidth/window.innerHeight,.1,1e3),A=new Qe({antialias:!0});A.setSize(window.innerWidth,window.innerHeight);A.shadowMap.enabled=!0;document.body.appendChild(A.domElement);const pt=new Ie,Q=pt.load("https://threejs.org/examples/textures/brick_diffuse.jpg");Q.wrapS=de;Q.wrapT=de;Q.repeat.set(4,2);const ve=new et({color:11393254,metalness:.1,roughness:0,ior:1.5,transmission:1,transparent:!0,thickness:.5,reflectivity:1}),G=new tt;C.add(G);const M=new ot(G),ft=new nt,O=.1,Ee=1,Ce=25;ft.load("muzica.mp3",function(e){M.setBuffer(e),M.setLoop(!0),M.setVolume(O)});let l,L={KeyW:!1,KeyA:!1,KeyS:!1,KeyD:!1,Space:!1};const mt=new st(16777215,.6);u.add(mt);const R=new it(16777215,1.5);R.position.set(50,50,25);R.castShadow=!0;R.shadow.camera.top=50;R.shadow.camera.bottom=-50;R.shadow.camera.left=-50;R.shadow.camera.right=50;u.add(R);const W=new k({color:10066329,metalness:.1,roughness:.8});if(Fe){document.getElementById("instructions-desktop")?.remove(),C.position.set(25,10,60),l=new at(C,A.domElement),l.enableDamping=!0,l.dampingFactor=.05,l.screenSpacePanning=!1,l.maxPolarAngle=Math.PI/2.1,l.target.set(0,5,0);const e=document.getElementById("instructions-mobile");e.addEventListener("click",()=>{G.context.state==="suspended"&&G.context.resume(),M.isPlaying||M.play(),e.style.display="none"},{once:!0})}else{document.getElementById("instructions-mobile")?.remove(),l=new rt(C,document.body);const e=document.createElement("div");e.id="instructions-desktop",e.innerHTML="Click pentru a începe<br>(W, A, S, D = Mișcare, MOUSE = Privire, SPACE = Săritură)",e.style.cssText="position:absolute; top:50%; left:50%; transform:translate(-50%,-50%); color:white; font-size:24px; text-align:center; background:rgba(0,0,0,0.5); padding:20px; border-radius:10px; cursor:pointer;",document.body.appendChild(e),e.addEventListener("click",()=>{l.lock()}),l.addEventListener("lock",()=>{e.style.display="none",G.context.state==="suspended"&&G.context.resume(),M.isPlaying||M.play()}),l.addEventListener("unlock",()=>{e.style.display=""}),l.object.position.set(25,5,45),u.add(l.object),document.addEventListener("keydown",o=>{L[o.code]=!0}),document.addEventListener("keyup",o=>{L[o.code]=!1})}window.addEventListener("resize",()=>{C.aspect=window.innerWidth/window.innerHeight,C.updateProjectionMatrix(),A.setSize(window.innerWidth,window.innerHeight)});const gt=new he(200,200),ee=new d(gt,W);ee.rotation.x=-Math.PI/2;ee.position.y=-.05;ee.receiveShadow=!0;u.add(ee);const ce=new V,ke=new U(1,6,1),v=14,E=4;for(let e=0;e<v;e++){const o=(e-(v-1)/2)*E,i=3,s=new d(ke,W);s.position.set(o,i,14),s.castShadow=!0,ce.add(s);const t=new d(ke,W);t.position.set(o,i,-14),t.castShadow=!0,ce.add(t)}u.add(ce);const Ne=new V,S=7,te=1;function yt(e){const o=new V,i=6+e*S,s=E*v,t=35,a=1,h=s-25,f=t-10,m=new We;m.moveTo(-s/2,-t/2),m.lineTo(-s/2,t/2),m.lineTo(s/2,t/2),m.lineTo(s/2,-t/2),m.lineTo(-s/2,-t/2);const b=new ze;b.moveTo(-h/2,-f/2),b.lineTo(-h/2,f/2),b.lineTo(h/2,f/2),b.lineTo(h/2,-f/2),b.lineTo(-h/2,-f/2),m.holes.push(b);const F={steps:1,depth:a,bevelEnabled:!1},P=new Be(m,F),N=new d(P,W);N.position.y=i+a/2,N.rotation.x=-Math.PI/2,N.receiveShadow=!0,N.castShadow=!0,o.add(N);const xe=new U(1,S,1.5),be=new U(E-1,S-1,.2);for(let q=0;q<v;q++){const ie=(q-(v-1)/2)*E,ae=new d(xe,W);ae.position.set(ie,i+S/2-.5,14),ae.castShadow=!0,o.add(ae);const re=new d(xe,W);if(re.position.set(ie,i+S/2-.5,-14),re.castShadow=!0,o.add(re),q<v-1){const Se=ie+E/2,Te=i+S/2,Pe=new d(be,ve);Pe.position.set(Se,Te,14),o.add(Pe);const Me=new d(be,ve);Me.position.set(Se,Te,-14),o.add(Me)}}return o}for(let e=0;e<te;e++)Ne.add(yt(e));u.add(Ne);const _=E*v,pe=5+te*S,le=35,xt=1,Oe=new k({map:Q}),Ue=new U(xt,pe,le),D=new d(Ue,Oe);D.position.set(-_/2,pe/2,0);D.castShadow=!0;D.receiveShadow=!0;u.add(D);const j=new d(Ue,Oe);j.position.set(_/2,pe/2,0);j.castShadow=!0;j.receiveShadow=!0;u.add(j);const T=document.createElement("canvas"),x=T.getContext("2d");T.width=412;T.height=86;x.fillStyle="#9B111E";x.fillRect(0,0,T.width,T.height);for(let e=0;e<5e3;e++){const o=Math.random()*T.width,i=Math.random()*T.height,s=Math.random()*2;x.fillStyle=`rgba(0, 0, 0, ${Math.random()*.1})`,x.fillRect(o,i,s,s),x.fillStyle=`rgba(40, 26, 13, ${Math.random()*.1})`,x.fillRect(o,i,s,s)}x.fillStyle="white";x.font="bold 40px Arial";x.textAlign="center";x.textBaseline="middle";x.fillText("HYPERMARKET",T.width/2,T.height/2);const bt=new we(T),St=new k({map:bt,side:Ge,metalness:0,roughness:1}),Tt=E*v/2,Ve=5+te*S,De=6+0*S+.5,Pt=Ve-De,Mt=(Ve+De)/2,vt=new he(Tt,Pt),je=new d(vt,St);je.position.set(0,Mt,17.6);u.add(je);const H=E*v,K=35,Et=1,z=12,I=new We;I.moveTo(-H/2,-K/2);I.lineTo(-H/2,K/2);I.lineTo(H/2,K/2);I.lineTo(H/2,-K/2);I.lineTo(-H/2,-K/2);const He=new ze;He.absellipse(0,0,z,z,0,Math.PI*2,!1,0);I.holes.push(He);const Ct={steps:1,depth:Et,bevelEnabled:!1},kt=new Be(I,Ct),Lt=new k({color:"red",metalness:.1,roughness:.8,side:Ge}),Y=new d(kt,Lt);Y.position.y=5+te*S;Y.rotation.x=-Math.PI/2;Y.receiveShadow=!0;Y.castShadow=!0;u.add(Y);const X=25,Z=6,oe=new V,At="blue",$=.25,Ke=new k({color:At,metalness:1,roughness:.3});for(let e=1;e<=Z;e++){const o=Math.PI/2.2*(e/Z),i=Math.sin(o)*z,s=Math.cos(o)*z;let t=null;for(let a=0;a<=X;a++){const h=a/X*Math.PI*2,f=new g(Math.cos(h)*s,i,Math.sin(h)*s);if(t){const m=new g().subVectors(f,t),b=m.length(),F=new g().addVectors(t,f).multiplyScalar(.5),P=new d(new ue($,$,b,8),Ke);P.position.copy(F),P.quaternion.setFromUnitVectors(new g(0,1,0),m.clone().normalize()),oe.add(P)}t=f}}for(let e=0;e<X;e++){const o=e/X*Math.PI*2;let i=null;for(let s=1;s<=Z;s++){const t=Math.PI/2.2*(s/Z),a=Math.sin(t)*z,h=Math.cos(t)*z,f=new g(Math.cos(o)*h,a,Math.sin(o)*h);if(i){const m=new g().subVectors(f,i),b=m.length(),F=new g().addVectors(i,f).multiplyScalar(.5),P=new d(new ue($,$,b,8),Ke);P.position.copy(F),P.quaternion.setFromUnitVectors(new g(0,1,0),m.clone().normalize()),oe.add(P)}i=f}}oe.position.y=10.5;u.add(oe);const B=new V,r=document.createElement("canvas"),c=r.getContext("2d");r.width=1536;r.height=1024;c.fillStyle="#CC0000";c.fillRect(0,0,r.width,r.height);c.textAlign="center";c.textBaseline="middle";c.fillStyle="white";c.font="bold 70px Sans-serif";c.fillText("BUN VENIT ÎN UNIVERSUL LITERAR",r.width/2,r.height*.12);c.font="50px Sans-serif";c.fillText("PETRE BARBU",r.width/2,r.height*.22);c.font="40px Sans-serif";c.fillText("PAGINA ESTE ÎN CONSTRUCȚIE",r.width/2,r.height*.3);c.font="30px Sans-serif";c.fillText("petrecenume@gmail.com",r.width/2,r.height*.38);c.font="35px Sans-serif";c.fillText("NOTA: priviți în jur cu mouse-ul, navigați cu tastele W, A, S, D.",r.width/2,r.height*.5);c.font="35px Sans-serif";c.fillText("Cu SPACEBAR săriți în sus de bucurie!",r.width/2,r.height*.58);c.font="bold 45px Sans-serif";c.fillText("TRĂIASCĂ LITERATURA! TRĂIASCĂ POPORUL!",r.width/2,r.height*.72);c.font="bold 45px Sans-serif";c.fillText("ÎN FRUNTE CU SCRIITORUL SĂU IUBIT!",r.width/2,r.height*.82);const Rt=new we(r),It=new k({map:Rt}),fe=15,Gt=10,Ye=new he(fe,Gt),ne=new d(Ye,It);ne.castShadow=!0;ne.receiveShadow=!0;ne.position.y=1.5;const y=document.createElement("canvas"),n=y.getContext("2d");y.width=750;y.height=500;n.fillStyle="#CC0000";n.fillRect(0,0,y.width,y.height);n.fillStyle="#FFFF99";n.strokeStyle="#FFFF99";n.lineWidth=8;n.font="bold 50px cursive";n.textAlign="center";n.textBaseline="middle";n.fillText("Petre + Geta",y.width/2,y.height*.3);n.fillText("= LOVE",y.width/2,y.height*.45);const Wt=y.width/2,zt=y.height*.7,w=75;n.save();n.translate(Wt,zt);n.beginPath();n.moveTo(0,w*.25);n.bezierCurveTo(w*.5,-w*.5,w,0,0,w);n.bezierCurveTo(-w,0,-w*.5,-w*.5,0,w*.25);n.closePath();n.fill();n.rotate(-Math.PI/4);n.beginPath();n.moveTo(-w*1.5,0);n.lineTo(w*1.5,0);n.stroke();n.beginPath();n.moveTo(w*1.5,0);n.lineTo(w*1.3,-w*.3);n.lineTo(w*1.3,w*.3);n.closePath();n.fill();n.restore();const me=new we(y);me.wrapS=de;me.repeat.x=-1;const Bt=new k({map:me,side:Re}),se=new d(Ye,Bt);se.position.y=1.5;se.position.z=-.01;se.receiveShadow=!0;B.add(ne);B.add(se);const Ft=8,Le=.15,qe=new ue(Le,Le,Ft,16),_e=new k({color:4473924}),ge=new d(qe,_e);ge.position.set(-fe/2,-1,-.1);ge.castShadow=!0;B.add(ge);const ye=new d(qe,_e);ye.position.set(fe/2,-1,-.1);ye.castShadow=!0;B.add(ye);B.position.set(29,5,33);u.add(B);const Ae=new J,Nt=new g(1,5,1),Ot=new J().setFromObject(D),Ut=new J().setFromObject(j),Vt=new J(new g(-_/2,-10,-le/2),new g(_/2,50,le/2));A.compile(u,C);const p=new g,Dt=20,jt=-20;function Xe(){if(requestAnimationFrame(Xe),Fe)l&&l.update();else{const e=lt.getDelta();if(l&&l.isLocked===!0){p.x-=p.x*10*e,p.z-=p.z*10*e,p.y+=jt*e;const o=new g;if(o.z=Number(L.KeyS)-Number(L.KeyW),o.x=Number(L.KeyA)-Number(L.KeyD),o.lengthSq()>0){o.normalize();const t=400;p.x+=o.x*t*e,p.z+=o.z*t*e}l.moveRight(-p.x*e),l.moveForward(-p.z*e),l.object.position.y+=p.y*e;const i=l.object.position;Ae.setFromCenterAndSize(i,Nt);const s=[Ot,Ut];for(const t of s)Ae.intersectsBox(t)&&(i.x-=-p.x*e,p.x=0);if(i.y<5&&(p.y=0,i.y=5,L.Space&&(p.y=Dt)),M.isPlaying){let t=O;const a=Vt.distanceToPoint(i);if(a<Ce){const h=1-a/Ce;t=O+h*(Ee-O)}M.setVolume(Math.max(O,Math.min(Ee,t)))}}}A.render(u,C)}Xe();
